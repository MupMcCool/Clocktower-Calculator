<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Power Score Calculator</title>
</head>
<body>
    <input type="file" accept=".json" id="jsonInput">
    <p id="result"></p>

    <script>
        let goodTotal = 0;
        let evilTotal = 0;
        let goodCount = 0;
        let evilCount = 0;

        // Assume powerScore.json contains an array of objects with properties: "name", "team", and "powerScore"
        const powerScoreData = [
            // ... Populate with data from powerScore.json ...
        ];

        function handleFileUpload(event) {
            const fileInput = event.target;
            const resultElement = document.getElementById('result');

            if (fileInput.files.length === 0) {
                resultElement.textContent = 'Error: Please select a file.';
                return;
            }

            const file = fileInput.files[0];

            if (file.type !== 'application/json') {
                resultElement.textContent = 'Error: Only JSON files are allowed.';
                return;
            }

            const reader = new FileReader();
            reader.onload = function (e) {
                const jsonContent = e.target.result;
                try {
                    const data = JSON.parse(jsonContent);
                    if (data.name && data.team && data.powerScore !== undefined) {
                        const matchingPowerScore = powerScoreData.find(
                            (entry) => entry.name === data.name && entry.team === data.team
                        );
                        if (matchingPowerScore) {
                            if (data.team === 'good') {
                                goodTotal += matchingPowerScore.powerScore;
                                goodCount++;
                            } else if (data.team === 'evil') {
                                evilTotal += matchingPowerScore.powerScore;
                                evilCount++;
                            }
                        }
                    }
                    const goodAve = goodCount > 0 ? goodTotal / goodCount : 0;
                    const evilAve = evilCount > 0 ? evilTotal / evilCount : 0;

                    resultElement.innerHTML = `Good: ${goodAve.toFixed(2)}<br>Evil: ${evilAve.toFixed(2)}`;
                } catch (error) {
                    resultElement.textContent = 'Error parsing JSON data.';
                }
            };
            reader.readAsText(file);
        }

        const fileInput = document.getElementById('jsonInput');
        fileInput.addEventListener('change', handleFileUpload);
    </script>
</body>
</html>
