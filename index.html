<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Power Score Calculator</title>
</head>
<body>
    <h1>Power Score Calculator</h1>
    <form id="jsonForm">
        <input type="file" id="jsonFile" accept=".json">
        <button type="submit">Submit JSON</button>
    </form>
    <div id="result"></div>

    <script>
        const goodTotal = 0;
        const evilTotal = 0;

        document.getElementById('jsonForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const fileInput = document.getElementById('jsonFile');
            const file = fileInput.files[0];

            if (!file || file.type !== 'application/json') {
                alert('Please select a valid JSON file.');
                return;
            }

            try {
                const jsonText = await file.text();
                const jsonData = JSON.parse(jsonText);

                // Load powerScore.json (replace with your actual data source)
                const response = await fetch('powerScore.json');
                const powerScoreData = await response.json();

                let goodCount = 0;
                let evilCount = 0;
                let goodSum = 0;
                let evilSum = 0;

                jsonData.forEach((entry) => {
                    const matchingEntry = powerScoreData.find((item) => item.name === entry.name);
                    if (matchingEntry) {
                        if (matchingEntry.team === 'good') {
                            goodCount++;
                            goodSum += matchingEntry.powerScore;
                        } else if (matchingEntry.team === 'evil') {
                            evilCount++;
                            evilSum += matchingEntry.powerScore;
                        }
                    }
                });

                const goodAve = goodCount > 0 ? goodSum / goodCount : 0;
                const evilAve = evilCount > 0 ? evilSum / evilCount : 0;

                document.getElementById('result').innerHTML = `
                    <p>Good: ${goodAve.toFixed(2)}</p>
                    <p>Evil: ${evilAve.toFixed(2)}</p>
                `;
            } catch (error) {
                console.error('Error reading JSON file:', error);
            }
        });
    </script>
</body>
</html>
